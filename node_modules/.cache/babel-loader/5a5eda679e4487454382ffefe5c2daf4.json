{"ast":null,"code":"var _jsxFileName = \"/home/cesar/Documentos/Trybe/Projetos para entrega/sd-017-project-trybewallet/src/components/Form.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport propTypes from 'prop-types';\nimport { addItem, getExpenseThunk } from '../actions/index';\nimport getCurrentCoins from '../services/walletAPI';\n\nclass Form extends React.Component {\n  constructor() {\n    super();\n\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        id,\n        value\n      } = target; // condicao para add o value como number do campo input\n\n      if (id === 'value') {\n        this.setState({\n          [id]: Number(value)\n        });\n      } else {\n        this.setState({\n          [id]: value\n        });\n      }\n    };\n\n    this.addRegister = async e => {\n      e.preventDefault();\n      const {\n        dispatchSetData,\n        expenses\n      } = this.props;\n      const resultAPI = await getCurrentCoins(); // atualiza o estado do componente com as chaves abaixo e despacha\n\n      this.setState({\n        exchangeRates: resultAPI,\n        id: expenses.length\n      }, this.calc); // const { exchangeRates } = this.state;\n      // console.log(result);\n      // function getTotal(total, item) {\n      //   return (total + item.value);\n      // }\n      // const soma = expenses.reduce(getTotal, 0);\n      // console.log(soma);\n    };\n\n    this.calc = () => {\n      const {\n        dispatchSetData\n      } = this.props;\n      dispatchSetData(this.state);\n      const {\n        expenses\n      } = this.props;\n      expenses.reduce((acc, item) => {\n        const value = Number(item.value) * Number(item.exchangeRates[item.wallet].ask);\n        console.log(value);\n        return acc + value;\n      }, 0);\n    };\n\n    this.state = {\n      id: 0,\n      value: 0,\n      description: '',\n      wallet: 'USD',\n      payment: '',\n      tag: '',\n      exchangeRates: []\n    };\n  }\n\n  componentDidMount() {\n    const {\n      dispatchSetCoins\n    } = this.props;\n    dispatchSetCoins();\n  } // funcao generica para adicionar os dados de input ao estado do componente\n\n\n  render() {\n    const {\n      currencies\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.addRegister,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"value\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 8\n      }\n    }, \"Valor\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      id: \"value\",\n      \"data-testid\": \"value-input\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 8\n      }\n    }, ' ', \"Descri\\xE7\\xE3o\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      id: \"description\",\n      \"data-testid\": \"description-input\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 10\n      }\n    })), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"wallet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 8\n      }\n    }, ' ', \"Moeda\", /*#__PURE__*/React.createElement(\"select\", {\n      \"data-testid\": \"currency-input\",\n      id: \"wallet\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 10\n      }\n    }, currencies.map(i => /*#__PURE__*/React.createElement(\"option\", {\n      key: i,\n      value: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 37\n      }\n    }, i)))), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 8\n      }\n    }, ' ', \"M\\xE9todo de Pagamento\", /*#__PURE__*/React.createElement(\"select\", {\n      \"data-testid\": \"method-input\",\n      id: \"payment\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 12\n      }\n    }, \"Dinheiro\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 12\n      }\n    }, \"Cart\\xE3o de Cr\\xE9dito\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 12\n      }\n    }, \"Cart\\xE3o de D\\xE9bito\"))), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"tag\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 8\n      }\n    }, ' ', \"Tag\", /*#__PURE__*/React.createElement(\"select\", {\n      \"data-testid\": \"tag-input\",\n      id: \"tag\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 12\n      }\n    }, \"Alimenta\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 12\n      }\n    }, \"Lazer\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 12\n      }\n    }, \"Trabalho\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 12\n      }\n    }, \"Transporte\"), /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 12\n      }\n    }, \"Sa\\xFAde\"))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 8\n      }\n    }, \"Adicionar Despesa\"));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => ({\n  dispatchSetData: value => dispatch(addItem(value)),\n  dispatchSetCoins: value => dispatch(getExpenseThunk(value))\n});\n\nconst mapStateToProps = state => ({\n  totalExpense: state.wallet.totalExpense,\n  expenses: state.wallet.expenses,\n  currencies: state.wallet.currencies\n});\n\nForm.propTypes = {\n  currencies: propTypes.object\n}.isRequired;\nexport default connect(mapStateToProps, mapDispatchToProps)(Form);","map":{"version":3,"sources":["/home/cesar/Documentos/Trybe/Projetos para entrega/sd-017-project-trybewallet/src/components/Form.js"],"names":["React","connect","propTypes","addItem","getExpenseThunk","getCurrentCoins","Form","Component","constructor","handleChange","target","id","value","setState","Number","addRegister","e","preventDefault","dispatchSetData","expenses","props","resultAPI","exchangeRates","length","calc","state","reduce","acc","item","wallet","ask","console","log","description","payment","tag","componentDidMount","dispatchSetCoins","render","currencies","map","i","mapDispatchToProps","dispatch","mapStateToProps","totalExpense","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport propTypes from 'prop-types';\nimport { addItem, getExpenseThunk } from '../actions/index';\nimport getCurrentCoins from '../services/walletAPI';\n\nclass Form extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      id: 0,\n      value: 0,\n      description: '',\n      wallet: 'USD',\n      payment: '',\n      tag: '',\n      exchangeRates: [],\n    };\n  }\n\n  componentDidMount() {\n    const { dispatchSetCoins } = this.props;\n    dispatchSetCoins();\n  }\n\n  // funcao generica para adicionar os dados de input ao estado do componente\n  handleChange = ({ target }) => {\n    const { id, value } = target;\n    // condicao para add o value como number do campo input\n    if (id === 'value') {\n      this.setState({ [id]: Number(value) });\n    } else {\n      this.setState({ [id]: value });\n    }\n  }\n\n  // funcao para adicionar o estado do componente ao global\n  addRegister = async (e) => {\n    e.preventDefault();\n    const { dispatchSetData, expenses } = this.props;\n\n    const resultAPI = await getCurrentCoins();\n\n    // atualiza o estado do componente com as chaves abaixo e despacha\n    this.setState({ exchangeRates: resultAPI, id: expenses.length }, this.calc);\n    // const { exchangeRates } = this.state;\n\n    // console.log(result);\n\n    // function getTotal(total, item) {\n    //   return (total + item.value);\n    // }\n    // const soma = expenses.reduce(getTotal, 0);\n\n    // console.log(soma);\n  }\n\n calc=() => {\n   const { dispatchSetData } = this.props;\n   dispatchSetData(this.state);\n   const { expenses } = this.props;\n   expenses.reduce((acc, item) => {\n     const value = Number(item.value) * Number(item.exchangeRates[item.wallet].ask);\n     console.log(value);\n     return acc + value;\n   }, 0);\n }\n\n render() {\n   const { currencies } = this.props;\n   return (\n     <form onSubmit={ this.addRegister }>\n       <label htmlFor=\"value\">\n         { }\n         Valor\n         <input\n           type=\"number\"\n           id=\"value\"\n           data-testid=\"value-input\"\n           onChange={ this.handleChange }\n         />\n       </label>\n       <label htmlFor=\"description\">\n         { ' ' }\n         Descrição\n         <input\n           type=\"text\"\n           id=\"description\"\n           data-testid=\"description-input\"\n           onChange={ this.handleChange }\n         />\n       </label>\n       <label htmlFor=\"wallet\">\n         { ' ' }\n         Moeda\n         <select data-testid=\"currency-input\" id=\"wallet\" onChange={ this.handleChange }>\n           {\n             currencies.map((i) => (<option key={ i } value={ i }>{ i }</option>))\n           }\n         </select>\n       </label>\n       <label htmlFor=\"payment\">\n         { ' ' }\n         Método de Pagamento\n         <select data-testid=\"method-input\" id=\"payment\" onChange={ this.handleChange }>\n           <option>Dinheiro</option>\n           <option>Cartão de Crédito</option>\n           <option>Cartão de Débito</option>\n         </select>\n       </label>\n       <label htmlFor=\"tag\">\n         { ' ' }\n         Tag\n         <select data-testid=\"tag-input\" id=\"tag\" onChange={ this.handleChange }>\n           <option>Alimentação</option>\n           <option>Lazer</option>\n           <option>Trabalho</option>\n           <option>Transporte</option>\n           <option>Saúde</option>\n         </select>\n       </label>\n       <button type=\"submit\">Adicionar Despesa</button>\n\n     </form>\n   );\n }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n  dispatchSetData: (value) => dispatch(addItem(value)),\n  dispatchSetCoins: (value) => dispatch(getExpenseThunk(value)),\n});\n\nconst mapStateToProps = (state) => ({\n  totalExpense: state.wallet.totalExpense,\n  expenses: state.wallet.expenses,\n  currencies: state.wallet.currencies,\n});\n\nForm.propTypes = {\n  currencies: propTypes.object,\n}.isRequired;\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Form);\n"]},"metadata":{},"sourceType":"module"}